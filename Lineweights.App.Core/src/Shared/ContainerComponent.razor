@using System.Linq
@using Lineweights.App.Core.Shared
@using Lineweights.Workflows.Containers
@inherits ContainerComponentBase

<div class="mb-5 card parent @(IsHidden ? "is-hidden" : "")" id="card-@Container.Info.Id">
  <header class="card-header">
    <p class="card-header-title">
      @GetTitle()
    </p>
    <p class="card-header-title" style="font-weight: normal; flex-grow: 0;">
      <TimeComponent DateTime="@Container.Info.LastRevisionTime"></TimeComponent>
    </p>
    <button class="card-header-icon" aria-label="close" @onclick="e => Hide()">
      <span class="icon">
        <i class="mdi mdi-close" aria-hidden="true"></i>
      </span>
    </button>
  </header>

  <div class="card-content">
    <div class="columns">
      <div class="column is-4">
        <div class="card major">
            @if (Container.Info.Location is not null)
            {
              <ViewerComponent Container="Container"></ViewerComponent>
            }
            else if (Container.Children.Any())
            {
              <ViewerComponent Container="Container.Children.FirstOrDefault()"></ViewerComponent>
            }
            else
            {
              <ViewerComponent Container="Container"></ViewerComponent>
            }
        </div>
      </div>
      <div class="column is-8 px-0 py-0">
        <div class="is-flex is-flex-wrap-wrap">
          @foreach (Container child in Container.Children)
          {
            <div class="card minor mx-3 my-3">
              <ViewerComponent Container="child"></ViewerComponent>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
